spring.application.name=sisacao-backend

# Configure file logging so that backend diagnostics persist beyond console output.
# The log file is stored in the shared logs directory used in the production VPS
# (/opt/sisacao/app/logs/).
logging.file.name=/opt/sisacao/app/logs/sisacao-backend.log
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] %logger{36} - %msg%n

# Expose Spring Boot Actuator endpoints, including the log file viewer, via HTTP.
management.endpoints.web.exposure.include=health,info,logfile
management.endpoint.logfile.enabled=true
management.endpoint.logfile.external-file=/opt/sisacao/app/logs/sisacao-backend.log

# Application specific settings used by the log viewer endpoint.
app.logs.file-path=/opt/sisacao/app/logs/sisacao-backend.log
app.logs.default-lines=200
app.logs.max-lines=1000

# The python-based collectors can take longer than 30 seconds when fetching
# intraday data from external services. Increase the default timeout so the
# backend waits for the script to finish instead of failing with a timeout.
sisacao.data-collection.python-timeout=PT2M

# Habilita a leitura direta do BigQuery para expor métricas no painel intraday.
sisacao.data-collection.bigquery.enabled=true
# Usa o projeto do GCP definido via variável de ambiente quando disponível.
sisacao.data-collection.bigquery.project-id=${GCP_PROJECT:ingestaokraken}

# Configura as views da Ops API conectadas ao BigQuery.
sisacao.ops.bigquery.enabled=true
sisacao.ops.bigquery.project-id=${GCP_PROJECT:ingestaokraken}
sisacao.ops.bigquery.dataset=monitoring
